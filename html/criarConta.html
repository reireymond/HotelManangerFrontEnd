<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Criar Conta - Hotel Fênix</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/login.css" />
  </head>
  <body>
    <main class="container" role="main">
      <section class="hero" aria-labelledby="hero-title">
        <div class="logo-destaque">
          <img src="../img/logo.jpg" alt="Logo Hotel Fênix" />
          <h1 class="hotel-nome">Hotel Fênix</h1>
          <p class="hotel-subtitle">Sistema de Reservas</p>
        </div>
      </section>

      <aside class="card" aria-labelledby="login-title">
        <p id="login-title">Criar Conta</p>

        <form id="create-account-form">
          <div class="field">
            <label for="name">Nome Completo</label>
            <input
              id="name"
              type="text"
              placeholder="Digite seu nome"
              required
            />
          </div>

          <div class="field">
            <label for="cpf">CPF</label>
            <input id="cpf" type="text" placeholder="000.000.000-00" required />
          </div>

          <div class="field">
            <label for="telefone">Telefone</label>
            <input
              id="telefone"
              type="tel"
              placeholder="(00) 00000-0000"
              required
            />
          </div>

          <div class="field">
            <label for="email">E-mail</label>
            <input
              id="email"
              type="email"
              placeholder="Digite seu e-mail"
              required
            />
          </div>

          <div class="field">
            <label for="password">Senha</label>
            <input
              id="password"
              type="password"
              placeholder="Crie uma senha"
              required
            />
          </div>

          <div class="field">
            <label for="confirm-password">Confirmar Senha</label>
            <input
              id="confirm-password"
              type="password"
              placeholder="Confirme sua senha"
              required
            />
          </div>

          <button type="submit" class="btn">Criar Conta</button>

          <p class="small-note">
            Já tem conta?
            <a href="../index.html" class="link">Entrar</a>
          </p>
        </form>
      </aside>
    </main>

    <script>
      function mascaraCPF(input) {
        let value = input.value.replace(/\D/g, "");
        if (value.length > 11) value = value.slice(0, 11);

        if (value.length > 9) {
          value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{1,2}).*/, "$1.$2.$3-$4");
        } else if (value.length > 6) {
          value = value.replace(/^(\d{3})(\d{3})(\d{0,3}).*/, "$1.$2.$3");
        } else if (value.length > 3) {
          value = value.replace(/^(\d{3})(\d{0,3}).*/, "$1.$2");
        }
        input.value = value;
      }

      function mascaraTelefone(input) {
        let value = input.value.replace(/\D/g, "");
        if (value.length > 11) value = value.slice(0, 11);

        if (value.length > 10) {
           value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, "($1) $2-$3");
        } else if (value.length > 6) {
           value = value.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, "($1) $2-$3");
        } else if (value.length > 2) {
           value = value.replace(/^(\d{2})(\d{0,5}).*/, "($1) $2");
        }
        input.value = value;
      }

      document.getElementById("cpf").addEventListener("input", function(e) {
          mascaraCPF(e.target);
      });
      
      document.getElementById("telefone").addEventListener("input", function(e) {
          mascaraTelefone(e.target);
      });

      document
        .getElementById("create-account-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const nome = document.getElementById("name").value;
          const cpf = document.getElementById("cpf").value;
          const pass = document.getElementById("password").value;
          const confirmPass = document.getElementById("confirm-password").value;

          if (pass !== confirmPass) {
            alert("As senhas não conferem!");
            return;
          }

          alert(`Conta criada com sucesso para ${nome} (CPF: ${cpf})!`);
          window.location.href = "../index.html";
        });
    </script>
  </body>
</html>
